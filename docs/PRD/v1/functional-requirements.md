# 3. Functional Requirements

## 3.1 Core Features

### 3.1.1 Schedule Creation

- Users can create new schedules via a multi-step or single-page form interface.
- Form fields:
  - Title (required, string, max 100 chars).
  - Description (optional, textarea, max 500 chars).
  - Start/End Dates (date inputs, with time picker for granularity).
  - Category/Tag (optional, dropdown: e.g., Work, Personal, Event).
  - Entries: Dynamic array (add/remove rows) with fields:
    - Time (required, time input or datetime-local).
    - Task (required, string, max 200 chars).
    - Assignee (optional, string or multi-select from predefined list).
    - Duration (optional, number in minutes).
    - Status (default: Pending, select: Pending/Completed/In Progress).
    - Notes (optional, textarea, max 300 chars).
    - Recurrence (optional, select: None/Daily/Weekly/Monthly).
- Validation: Required fields marked with *, date ranges (start <= end), unique time slots per day, assignee email format if provided, no overlapping times.
- Edge Cases: Handle empty entries array (min 1 entry), invalid dates (e.g., end before start), large inputs (truncate with warning).
- Implementation: Use `src/components/schedule-form.tsx` with shadcn/ui inputs, labels, buttons, and dynamic form arrays (e.g., via react-hook-form).

**User Stories**:
- As an Event Coordinator, I want to add multiple entries at once so I can build a full day's schedule efficiently.
- As a Team Member, I want to set recurrence for tasks so repeating assignments are auto-populated.
- Acceptance Criteria: Form submits only if valid; shows inline errors; persists draft on blur.

### 3.1.2 Schedule Viewing and Editing

- Display schedules in a responsive, interactive table.
- Table columns: Checkbox (select), Time, Task, Assignee, Duration, Status (badge), Notes (expandable), Actions (edit/delete).
- Features:
  - Inline editing: Click cell to edit (e.g., double-click task to update).
  - Bulk actions: Select multiple rows for status update or delete.
  - Sort by any column (ascending/descending).
  - Filter: By status, assignee, date range; global search on task/notes.
  - Pagination: For schedules > 50 entries (10 per page).
  - Visual Indicators: Color-coded status badges, overdue highlights (red if past due).
- Implementation: Leverage `src/components/schedule-table.tsx` with shadcn/ui table, sortable headers, and badges.

**User Stories**:
- As an Admin, I want to filter by assignee so I can review individual workloads.
- As a User, I want inline editing with undo so I can correct typos without losing work.
- Acceptance Criteria: Changes auto-save after 3s idle or on blur; confirm deletes; search matches partial text case-insensitively.

### 3.1.3 Printing and Export

- Generate printable views in PDF (via jsPDF or html2pdf) or HTML (print-optimized CSS).
- Print Options: Landscape/portrait, include totals/summaries, custom headers (title, date, logo placeholder), footers (page numbers, generated by).
  - Filters: Print selected entries only; date range.
- Export Formats:
  - CSV: For Excel import (columns match table).
  - JSON: Full data dump for backups.
  - iCal (.ics): For calendar import (future).
  - PDF: With styling matching app theme.
- Implementation: Extend `src/components/print-schedule.tsx` using browser print API for HTML, jsPDF for PDF; add export buttons in table header.

**User Stories**:
- As a Teacher, I want to print a weekly overview with assignee columns so I can post it in class.
- As an Admin, I want CSV export with filters so I can analyze in external tools.
- Acceptance Criteria: Exports preserve data integrity; PDF < 1MB for 100 entries; print preview shows exact output.

### 3.1.4 Data Persistence

- Local storage for offline use (via browser localStorage or IndexedDB for larger datasets).
- Multi-schedule Management: List view of all saved schedules; rename/delete/archive.
- CRUD Operations:
  - Create: Save new schedule with auto-generated ID (UUID).
  - Read: Load by ID or list all; search schedules by title.
  - Update: Patch individual entries or full schedule.
  - Delete: Soft delete (archive) or hard delete with confirmation.
- Backup: Auto-save drafts; manual export all schedules as ZIP of JSONs.
- Future: Cloud sync with user auth (Firebase Realtime DB); conflict resolution on merge.
- Implementation: Custom hooks (useLocalStorage) wrapping localStorage; migrate to IndexedDB if >5MB.

**User Stories**:
- As a User, I want to manage multiple schedules so I can separate work/personal.
- As an Admin, I want auto-backup so data isn't lost on browser clear.
- Acceptance Criteria: Data persists across sessions; quota exceeded shows warning; sync conflicts prompt user choice.

## 3.2 User Flows

1. **Onboarding**:
   - User loads app → Dashboard shows welcome message, sample schedule, "Create New" button, or "Load Existing" dropdown.
   - Optional tour: Stepper highlighting key features (dismissible).

2. **Create Schedule**:
   - Click "Create New" → Form loads (pre-filled with today's date) → Add entries dynamically → Validate on submit → Success: Save and redirect to view → Error: Highlight issues.

3. **View/Edit**:
   - Dashboard → Select schedule from list/card → Load table view → Inline edit or bulk actions → Auto-save indicator → Manual "Save" for explicit commits.

4. **Print/Export**:
   - In table view → Click "Print" or "Export" dropdown → Select format/options → Preview modal → Confirm → Download/print.

5. **Search and Manage**:
   - Dashboard → Search bar for schedules → Filter by date/tag → Archive/delete with confirmation.

6. **Error Handling**: Display toast/alerts for validation (inline + summary), network/offline warnings, quota issues (using `src/components/ui/alert.tsx` and sonner for toasts).

**Detailed Flow Diagram** (Text-based):
```
Dashboard → Create → Form Validation → Save → Table View
          ↓
        Load → Table → Edit/Filter → Export/Print → Success Modal
          ↓
        Error → Alert → Retry
```

## 3.3 Non-Functional Requirements

- **Performance**: Render tables with up to 100 entries < 1 second; lazy-load large datasets; optimize images/icons < 50KB total.
- **Accessibility**: WCAG 2.1 AA compliant – ARIA labels on all interactive elements, keyboard navigation (tabindex, Enter to edit), screen reader support (semantic HTML), color contrast > 4.5:1, alt text for icons.
- **Security**: Sanitize all inputs (DOMPurify for notes); no sensitive data (e.g., no passwords); CSP headers in build; HTTPS enforcement on deploy.
- **Responsive Design**: Mobile-first with Tailwind CSS breakpoints (sm: 640px, md: 768px, lg: 1024px); touch-friendly buttons (>44px); horizontal scroll for tables on small screens.
- **Browser Support**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+; polyfill for older via Vite.
- **Reliability**: Offline functionality (Service Worker for PWA); error boundaries in React; logging to console for dev.
- **Scalability**: Handle 1000+ entries via virtualization (react-window); modular code for future backend swap.
- **Internationalization (i18n)**: English default; RTL support; date/time formats via Intl API; future: react-i18next for multi-lang.

**Cross-reference**: See [technical-requirements.md](../technical-requirements.md) for implementation details. For v2 multi-user flows, see [../v2/user-flows.md](../v2/user-flows.md).